# Release v1.2.0-next.2

## @backstage/plugin-scaffolder-backend@1.2.0-next.1

### Minor Changes

- f8baf7df44: Added the ability to reference the user in the `template.yaml` manifest

### Patch Changes

- Updated dependencies
  - @backstage/backend-common@0.13.3-next.2
  - @backstage/plugin-catalog-backend@1.1.2-next.2
  - @backstage/plugin-scaffolder-common@1.1.0-next.0

## @backstage/plugin-scaffolder-backend-module-rails@0.4.0-next.1

### Minor Changes

- 3d001a3bcf: **BREAKING**: Added a new `allowedImageNames` option, which needs to list any image name for it to be allowed as `imageName` input.

### Patch Changes

- Updated dependencies
  - @backstage/backend-common@0.13.3-next.2
  - @backstage/plugin-scaffolder-backend@1.2.0-next.1

## @backstage/plugin-scaffolder-common@1.1.0-next.0

### Minor Changes

- f8baf7df44: Added the ability to reference the user in the `template.yaml` manifest

## @backstage/backend-common@0.13.3-next.2

### Patch Changes

- 4b811aafce: Implemented the `UrlReader.search()` method for Google Cloud Storage. Due to limitations in the underlying storage API, only prefix-based searches are supported right now (for example, `https://storage.cloud.google.com/your-bucket/some-path/*`).

## @backstage/backend-tasks@0.3.1-next.1

### Patch Changes

- 73480846dd: `TaskScheduleDefinition` has been updated to also accept an options object containing duration information in the form of days, hours, seconds and so on. This allows for scheduling without importing `luxon`.

  ```diff
  -import { Duration } from 'luxon';
  // omitted other code

  const schedule = env.scheduler.createScheduledTaskRunner({
  -  frequency: Duration.fromObject({ minutes: 10 }),
  -  timeout: Duration.fromObject({ minutes: 15 }),
  +  frequency: { minutes: 10 },
  +  timeout: { minutes: 15 },
     // omitted other code
  });
  ```

- ebbec677e1: Correctly set next run time for tasks

- Updated dependencies
  - @backstage/backend-common@0.13.3-next.2

## @backstage/cli@0.17.1-next.2

### Patch Changes

- 632be18bbc: Updated `create-github-app` command to prompt for read or write permissions to simplify setup.

## @backstage/create-app@0.4.27-next.2

### Patch Changes

- 73480846dd: Simplified the search collator scheduling by removing the need for the `luxon` dependency.

  For existing installations the scheduling can be simplified by removing the `luxon` dependency and using the human friendly duration object instead.
  Please note that this only applies if luxon is not used elsewhere in your installation.

  `packages/backend/package.json`

  ```diff
       "express": "^4.17.1",
       "express-promise-router": "^4.1.0",
  -    "luxon": "^2.0.2",
  ```

  `packages/backend/src/plugins/search.ts`

  ```diff
   import { Router } from 'express';
  -import { Duration } from 'luxon';

   // omitted other code

     const schedule = env.scheduler.createScheduledTaskRunner({
  -    frequency: Duration.fromObject({ minutes: 10 }),
  -    timeout: Duration.fromObject({ minutes: 15 }),
  +    frequency: { minutes: 10 },
  +    timeout: { minutes: 15 },
       // A 3 second delay gives the backend server a chance to initialize before
       // any collators are executed, which may attempt requests against the API.
  -    initialDelay: Duration.fromObject({ seconds: 3 }),
  +    initialDelay: { seconds: 3 },
     });
  ```

- 7cda923c16: Tweaked the `.dockerignore` file so that it's easier to add additional backend packages if desired.

  To apply this change to an existing app, make the following change to `.dockerignore`:

  ```diff
   cypress
   microsite
   node_modules
  -packages
  -!packages/backend/dist
  +packages/*/src
  +packages/*/node_modules
   plugins
  ```

- f55414f895: Added sample catalog data to the template under a top-level `examples` directory. This includes some simple entities, org data, and a template. You can find the sample data at <https://github.com/backstage/backstage/tree/master/packages/create-app/templates/default-app/examples>.

## @backstage/plugin-catalog-backend@1.1.2-next.2

### Patch Changes

- 16a40ac4c0: Fix wrong return type of the `isGroupEntity` function.
- Updated dependencies
  - @backstage/backend-common@0.13.3-next.2
  - @backstage/plugin-scaffolder-common@1.1.0-next.0

## @backstage/plugin-catalog-backend-module-github@0.1.3-next.1

### Patch Changes

- a7de43f648: `GitHubOrgEntityProvider.fromConfig` now supports a `schedule` option like other
  entity providers, that makes it more convenient to leverage using the common
  task scheduler.

  If you want to use this in your own project, it is used something like the following:

  ```ts
  // In packages/backend/src/plugins/catalog.ts
  builder.addEntityProvider(
    GitHubOrgEntityProvider.fromConfig(env.config, {
      id: 'production',
      orgUrl: 'https://github.com/backstage',
      schedule: env.scheduler.createScheduledTaskRunner({
        frequency: { cron: '*/30 * * * *' },
        timeout: { minutes: 10 },
      }),
      logger: env.logger,
    }),
  );
  ```

- Updated dependencies
  - @backstage/backend-common@0.13.3-next.2
  - @backstage/plugin-catalog-backend@1.1.2-next.2
  - @backstage/backend-tasks@0.3.1-next.1

## @backstage/plugin-catalog-react@1.1.0-next.2

### Patch Changes

- 57f41fb8d6: Make Menu item on filters accessible through keyboard

## @backstage/plugin-scaffolder@1.2.0-next.2

### Patch Changes

- 70817dafc0: Updated dependency `use-immer` to `^0.7.0`.
- 1af133f779: Updated dependency `event-source-polyfill` to `1.0.26`.
- Updated dependencies
  - @backstage/plugin-scaffolder-common@1.1.0-next.0
  - @backstage/plugin-catalog-react@1.1.0-next.2

## @backstage/plugin-search-backend-module-elasticsearch@0.1.4-next.1

### Patch Changes

- 71d3432710: Search Engines will now index documents in batches of 1000 instead of 100 (under the hood). This may result in your Backstage backend consuming slightly more memory during index runs, but should dramatically improve indexing performance for large document sets.
- Updated dependencies
  - @backstage/plugin-search-backend-node@0.6.1-next.1

## @backstage/plugin-search-backend-module-pg@0.3.3-next.1

### Patch Changes

- 71d3432710: Search Engines will now index documents in batches of 1000 instead of 100 (under the hood). This may result in your Backstage backend consuming slightly more memory during index runs, but should dramatically improve indexing performance for large document sets.
- Updated dependencies
  - @backstage/backend-common@0.13.3-next.2
  - @backstage/plugin-search-backend-node@0.6.1-next.1

## @backstage/plugin-search-backend-node@0.6.1-next.1

### Patch Changes

- 71d3432710: Search Engines will now index documents in batches of 1000 instead of 100 (under the hood). This may result in your Backstage backend consuming slightly more memory during index runs, but should dramatically improve indexing performance for large document sets.
- Updated dependencies
  - @backstage/backend-tasks@0.3.1-next.1

## @backstage/plugin-techdocs@1.1.1-next.2

### Patch Changes

- 1af133f779: Updated dependency `event-source-polyfill` to `1.0.26`.
- Updated dependencies
  - @backstage/plugin-catalog-react@1.1.0-next.2

## example-backend@0.2.71-next.2

### Patch Changes

- Updated dependencies
  - @backstage/backend-common@0.13.3-next.2
  - @backstage/plugin-catalog-backend@1.1.2-next.2
  - @backstage/backend-tasks@0.3.1-next.1
  - @backstage/plugin-scaffolder-backend-module-rails@0.4.0-next.1
  - @backstage/plugin-scaffolder-backend@1.2.0-next.1
  - @backstage/plugin-search-backend-node@0.6.1-next.1
  - @backstage/plugin-search-backend-module-elasticsearch@0.1.4-next.1
  - @backstage/plugin-search-backend-module-pg@0.3.3-next.1
